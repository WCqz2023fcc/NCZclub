<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的 - 管理员中心</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <h1>我的</h1>
            </div>
            <div class="header-right">
                <button onclick="location.href='index.html'" class="admin-login-btn">返回</button>
            </div>
        </header>

        <div class="section">
            <h3>修改管理员账号</h3>
            <div class="order-box">
                <div class="form-group">
                    <label>原账号</label>
                    <input type="text" id="old_username" placeholder="请输入当前账号">
                </div>
                <div class="form-group">
                    <label>原密码</label>
                    <input type="password" id="old_pwd" placeholder="请输入当前密码">
                </div>
                <div class="form-group">
                    <label>新账号名</label>
                    <input type="text" id="new_username" placeholder="请输入新账号">
                </div>
                <div style="text-align:right;">
                    <button id="saveUser" class="submit-btn" style="width:auto;">保存新账号</button>
                </div>
            </div>
        </div>

        <div class="section">
            <h3>修改管理员密码</h3>
            <div class="order-box">
                <div class="form-group">
                    <label>原账号</label>
                    <input type="text" id="old_username2" placeholder="请输入当前账号">
                </div>
                <div class="form-group">
                    <label>原密码</label>
                    <input type="password" id="old_pwd2" placeholder="请输入当前密码">
                </div>
                <div class="form-group">
                    <label>新密码</label>
                    <input type="password" id="new_pwd" placeholder="请输入新密码">
                </div>
                <div style="text-align:right;">
                    <button id="savePwd" class="submit-btn" style="width:auto;">保存新密码</button>
                </div>
            </div>
        </div>
    </div>

    <script>function getAdminData() {
            if (!localStorage.getItem('adminData')) {
                localStorage.setItem('adminData', JSON.stringify({
                    username: "admin1",
                    password: "123456"
                }));
            }
            return JSON.parse(localStorage.getItem('adminData'));
        }

        // 修改账号
        document.getElementById('saveUser').onclick = function () {
            const oldUser = document.getElementById('old_username').value.trim();
            const oldPwd = document.getElementById('old_pwd').value.trim();
            const newUser = document.getElementById('new_username').value.trim();
            const admin = getAdminData();

            if (oldUser !== admin.username || oldPwd !== admin.password) {
                alert('原账号或密码错误！');
                return;
            }
            if (!newUser) {
                alert('请输入新账号');
                return;
            }

            admin.username = newUser;
            localStorage.setItem('adminData', JSON.stringify(admin));
            alert('账号修改成功！下次登录使用新账号');

            document.getElementById('old_username').value = '';
            document.getElementById('old_pwd').value = '';
            document.getElementById('new_username').value = '';
        };

        // 修改密码
        document.getElementById('savePwd').onclick = function () {
            const oldUser = document.getElementById('old_username2').value.trim();
            const oldPwd = document.getElementById('old_pwd2').value.trim();
            const newPwd = document.getElementById('new_pwd').value.trim();
            const admin = getAdminData();

            if (oldUser !== admin.username || oldPwd !== admin.password) {
                alert('原账号或密码错误！');
                return;
            }
            if (!newPwd) {
                alert('请输入新密码');
                return;
            }

            admin.password = newPwd;
            localStorage.setItem('adminData', JSON.stringify(admin));
            alert('密码修改成功！下次登录使用新密码');

            document.getElementById('old_username2').value = '';
            document.getElementById('old_pwd2').value = '';
            document.getElementById('new_pwd').value = '';
        };</script>
</body>
</html>
