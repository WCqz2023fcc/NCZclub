<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>俱乐部管理中心</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-left">
                <h1>俱乐部管理中心</h1>
            </div>
            <div class="header-right">
                <button onclick="location.href='index.html'" class="admin-login-btn">返回首页</button>
            </div>
        </header>

        <!-- 修改俱乐部简介 -->
        <div class="section">
            <h3>修改俱乐部简介</h3>
            <div class="order-box">
                <div class="form-group">
                    <label>简介内容</label>
                    <textarea id="clubIntro" rows="3" placeholder="请输入俱乐部简介"></textarea>
                </div>
                <div style="text-align:right;">
                    <button id="saveIntro" class="submit-btn" style="width:auto;">保存简介</button>
                </div>
            </div>
        </div>

        <!-- 修改技能要求（显示在空图区域） -->
        <div class="section">
            <h3>修改技能要求</h3>
            <div class="order-box">
                <div class="form-group">
                    <label>技能要求内容</label>
                    <textarea id="skillReq" rows="3" placeholder="请输入技能要求，将显示在中间空图位置"></textarea>
                </div>
                <div style="text-align:right;">
                    <button id="saveSkill" class="submit-btn" style="width:auto;">保存要求</button>
                </div>
            </div>
        </div>

        <!-- 添加打手 -->
        <div class="section">
            <h3>添加俱乐部打手</h3>
            <div class="order-box">
                <div class="form-group">
                    <label>打手名称</label>
                    <input type="text" id="playerName" placeholder="输入打手名称">
                </div>
                <div class="form-group">
                    <label>当前赛季KD</label>
                    <input type="text" id="playerKD" placeholder="例如：5.82">
                </div>
                <div class="form-group">
                    <label>生存分</label>
                    <input type="text" id="playerSurvive" placeholder="例如：3800">
                </div>
                <div class="form-group">
                    <label>战斗分</label>
                    <input type="text" id="playerFight" placeholder="例如：4200">
                </div>
                <div style="text-align:right;">
                    <button id="addPlayer" class="submit-btn" style="width:auto;">添加并排名</button>
                </div>
            </div>
        </div>

        <!-- 打手排行榜 -->
        <div class="section">
            <h3>当前打手排行榜（综合评分）</h3>
            <div id="playerList"></div>
            <button id="clearAll" class="submit-btn" style="background:#ff4444;margin-top:10px;">清空所有打手</button>
        </div>
    </div>

    <script>
        window.onload = function () {
            document.getElementById("clubIntro").value = localStorage.getItem("clubIntro") || "俱乐部简介";
            document.getElementById("skillReq").value = localStorage.getItem("skillReq") || "俱乐部尚未设置招募条件";
            renderPlayerList();
        };

        // 保存简介
        document.getElementById("saveIntro").onclick = function () {
            localStorage.setItem("clubIntro", document.getElementById("clubIntro").value);
            alert("俱乐部简介保存成功！已同步全站");
        };

        // 保存技能要求（现在是改空图那里的文字）
        document.getElementById("saveSkill").onclick = function () {
            localStorage.setItem("skillReq", document.getElementById("skillReq").value);
            alert("技能要求保存成功！已同步到中间空图区域");
        };

        // 综合分
        function getTotal(kd, s, f) {
            kd = parseFloat(kd) || 0;
            s = parseInt(s) || 0;
            f = parseInt(f) || 0;
            return kd * 1000 + s + f;
        }

        // 添加打手
        document.getElementById("addPlayer").onclick = function () {
            var name = document.getElementById("playerName").value.trim();
            var kd = document.getElementById("playerKD").value.trim();
            var s = document.getElementById("playerSurvive").value.trim();
            var f = document.getElementById("playerFight").value.trim();

            if (!name || !kd || !s || !f) { alert("请填写完整"); return; }

            var list = JSON.parse(localStorage.getItem("players") || "[]");
            list.push({ name, kd, survive: s, fight: f, total: getTotal(kd, s, f) });
            list.sort((a, b) => b.total - a.total);

            localStorage.setItem("players", JSON.stringify(list));
            renderPlayerList();
            alert("添加成功！主页排行榜已同步");

            document.getElementById("playerName").value = "";
            document.getElementById("playerKD").value = "";
            document.getElementById("playerSurvive").value = "";
            document.getElementById("playerFight").value = "";
        };

        function renderPlayerList() {
            var list = JSON.parse(localStorage.getItem("players") || "[]");
            var box = document.getElementById("playerList");
            if (list.length === 0) { box.innerHTML = "<p>暂无打手</p>"; return; }
            box.innerHTML = list.map((p, i) => `
                    <div class="player-item">
                        <div class="rank">第${i + 1}名</div>
                        <p>名称：${p.name}</p>
                        <p>KD：${p.kd}｜生存：${p.survive}｜战斗：${p.fight}</p>
                        <p class="total">综合：${p.total.toFixed(0)}</p>
                    </div>
                `).join("");
        }

        document.getElementById("clearAll").onclick = function () {
            if (confirm("确定清空？")) {
                localStorage.removeItem("players");
                renderPlayerList();
            }
        }
    </script>
</body>
</html>
